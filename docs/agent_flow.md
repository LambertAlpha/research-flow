Agent 架构设计：虚拟“投研编辑部”我们可以采用 “主编-分析师-工兵” 的层级架构。这不仅仅是一个 Agent，而是一个 Multi-Agent System (MAS)。1. 角色定义 (Role Definitions)我们将周报生产线拆解为 4 个核心 Agent：Agent 角色类似于现实中的职位核心职责拥有工具 (Tools)主编 Agent (Chief Editor)研究主管任务分发与品控。它不写具体内容，而是协调其他 Agent，最后负责把关报告逻辑通顺度。状态管理、最终审核权数据工兵 Agent (Data Engineer)实习生/数据员获取与清洗数据。负责调用 API，如果 API 报错，它负责重试或切换备用源。Glassnode API, Coinglass API, Yahoo Finance图表艺术家 Agent (Chartist)设计师绘图。接收数据，生成符合公司 VI 规范的专业图表图片。Python REPL (代码执行环境), Matplotlib资深分析师 Agent (Senior Analyst)宏观/链上分析师撰写深度点评。看着图表和数据，模仿历史周报的语气写出分析段落。历史周报知识库 (RAG)2. 交互工作流 (Interaction Workflow)这是一个基于 LangGraph 的有向有环图（DAG）：第一阶段：策划与分发User 触发：“生成本周周报”。主编 Agent 初始化任务列表：[宏观模块, BTC模块, ETH模块, 总结模块]，并按照依赖关系启动子任务。第二阶段：并行执行 (以 BTC 模块为例)主编 呼叫 数据工兵：“去抓取 BTC 本周的 URPD 数据和 ETF 流入数据。”数据工兵 执行工具调用，返回 JSON 数据。(如果数据缺失，工兵会自动尝试备用源或报告错误)。主编 将数据转发给 图表艺术家：“用这个数据画一张 URPD 柱状图，保存为 btc_urpd.png。”图表艺术家 编写 Python 代码绘图，并返回图片路径。主编 将“数据摘要 + 图片路径”发给 资深分析师：“基于这些数据和图表，写一段 300 字的市场分析，语气要悲观谨慎。”资深分析师 检索历史周报风格，生成文案。第三阶段：审核与合成主编 Agent 收集所有模块的文案和图片。自省循环 (Self-Reflection)： 主编检查文案是否存在逻辑冲突（例如：宏观模块说大利好，BTC 模块却说要大跌，且没解释原因）。如果冲突： 打回给分析师重写，并附上修改意见。如果通过： 调用 PDF 生成工具，输出最终文件。